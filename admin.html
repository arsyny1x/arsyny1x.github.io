<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - arsyny1x</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .status-online { @apply bg-emerald-500/20 text-emerald-400 border-emerald-500/30; }
    .status-updating { @apply bg-yellow-500/20 text-yellow-400 border-yellow-500/30; }
    .status-patched { @apply bg-red-500/20 text-red-400 border-red-500/30; }
  </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">
  <!-- Header -->
  <header class="bg-gray-900 border-b border-gray-800 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-cyan-500 flex items-center justify-center">
          <span class="text-white font-bold text-sm">A</span>
        </div>
        <h1 class="text-xl font-bold text-white">arsyny1x <span class="text-gray-500 font-normal">| Admin Panel</span></h1>
      </div>
      <div class="flex items-center space-x-4">
        <a href="index.html" target="_blank" class="text-sm text-gray-400 hover:text-white transition-colors">
          View Site â†’
        </a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Stats Cards -->
    <div class="grid grid-cols-3 gap-4 mb-8">
      <div class="p-4 rounded-xl bg-gray-900/50 border border-gray-800">
        <div class="flex items-center space-x-2 mb-1">
          <span class="flex h-2 w-2 rounded-full bg-emerald-400"></span>
          <span class="text-sm text-gray-400">Online</span>
        </div>
        <p class="text-2xl font-bold text-emerald-400" id="count-online">0</p>
      </div>
      <div class="p-4 rounded-xl bg-gray-900/50 border border-gray-800">
        <div class="flex items-center space-x-2 mb-1">
          <span class="flex h-2 w-2 rounded-full bg-yellow-400"></span>
          <span class="text-sm text-gray-400">Updating</span>
        </div>
        <p class="text-2xl font-bold text-yellow-400" id="count-updating">0</p>
      </div>
      <div class="p-4 rounded-xl bg-gray-900/50 border border-gray-800">
        <div class="flex items-center space-x-2 mb-1">
          <span class="flex h-2 w-2 rounded-full bg-red-400"></span>
          <span class="text-sm text-gray-400">Patched</span>
        </div>
        <p class="text-2xl font-bold text-red-400" id="count-patched">0</p>
      </div>
    </div>

    <!-- Add New Game -->
    <div class="mb-8 p-6 rounded-xl bg-gray-900/50 border border-gray-800">
      <h2 class="text-lg font-semibold text-white mb-4">Add New Game</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <input type="text" id="new-game-name" placeholder="Game Name" 
               class="px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50">
        <input type="text" id="new-game-features" placeholder="Features (e.g. Auto Farm, ESP)" 
               class="px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50">
        <select id="new-game-status" class="px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white focus:outline-none focus:border-emerald-500/50">
          <option value="online">ðŸŸ¢ Online</option>
          <option value="updating">ðŸŸ¡ Updating</option>
          <option value="patched">ðŸ”´ Patched</option>
        </select>
        <button onclick="addGame()" 
                class="px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white font-medium transition-colors">
          Add Game
        </button>
      </div>
    </div>

    <!-- Games List -->
    <div class="rounded-xl bg-gray-900/50 border border-gray-800 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
        <h2 class="text-lg font-semibold text-white">Manage Games</h2>
        <input type="text" id="search-games" placeholder="Search games..." oninput="filterAdminGames(this.value)"
               class="px-3 py-1.5 rounded-lg bg-gray-800 border border-gray-700 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50">
      </div>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-800/50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Game</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Features</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Last Updated</th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody id="games-table-body" class="divide-y divide-gray-800">
            <!-- Games will be loaded here -->
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Notification Toast -->
  <div id="toast" class="fixed bottom-4 right-4 px-4 py-3 rounded-lg bg-emerald-500 text-white transform translate-y-20 opacity-0 transition-all duration-300 z-50">
    <span id="toast-message">Success!</span>
  </div>

  <script>
    // Firebase Config - à¹à¸à¹‰à¹„à¸‚à¸•à¸£à¸‡à¸™à¸µà¹‰à¸”à¹‰à¸§à¸¢à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸­à¸‡à¸„à¸¸à¸“
    const firebaseConfig = {
      apiKey: "AIzaSyCTr7FaiVonN58y_satDITT3HjcBmwNY9Q",
      authDomain: "arsyny1x-hub.firebaseapp.com",
      databaseURL: "https://arsyny1x-hub-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "arsyny1x-hub",
      storageBucket: "arsyny1x-hub.firebasestorage.app",
      messagingSenderId: "167271191741",
      appId: "1:167271191741:web:af544285964ee6221e13d4",
      measurementId: "G-EHPQ8MT1DV"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let allGames = {};

    // Load Games
    function loadGames() {
      db.ref('games').on('value', (snapshot) => {
        allGames = snapshot.val() || {};
        renderGames(allGames);
        updateCounts(allGames);
      });
    }

    // Render Games Table
    function renderGames(games) {
      const tbody = document.getElementById('games-table-body');
      tbody.innerHTML = '';

      Object.entries(games).forEach(([id, game]) => {
        const statusColors = {
          online: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',
          updating: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',
          patched: 'bg-red-500/20 text-red-400 border-red-500/30'
        };

        const row = document.createElement('tr');
        row.className = 'hover:bg-gray-800/30 transition-colors';
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="text-white font-medium">${game.name}</span>
          </td>
          <td class="px-6 py-4">
            <input type="text" value="${game.features || ''}" 
                   onchange="updateGame('${id}', 'features', this.value)"
                   class="w-full px-2 py-1 rounded bg-gray-800 border border-gray-700 text-sm text-gray-300 focus:outline-none focus:border-emerald-500/50">
          </td>
          <td class="px-6 py-4">
            <select onchange="updateGame('${id}', 'status', this.value)"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium border ${statusColors[game.status]} bg-opacity-20 cursor-pointer focus:outline-none">
              <option value="online" ${game.status === 'online' ? 'selected' : ''}>ðŸŸ¢ Online</option>
              <option value="updating" ${game.status === 'updating' ? 'selected' : ''}>ðŸŸ¡ Updating</option>
              <option value="patched" ${game.status === 'patched' ? 'selected' : ''}>ðŸ”´ Patched</option>
            </select>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
            ${game.lastUpdated ? new Date(game.lastUpdated).toLocaleString('th-TH') : '-'}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-right">
            <button onclick="deleteGame('${id}')" 
                    class="text-red-400 hover:text-red-300 text-sm font-medium transition-colors">
              Delete
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    // Update Counts
    function updateCounts(games) {
      const counts = { online: 0, updating: 0, patched: 0 };
      Object.values(games).forEach(g => {
        if (counts[g.status] !== undefined) counts[g.status]++;
      });
      document.getElementById('count-online').textContent = counts.online;
      document.getElementById('count-updating').textContent = counts.updating;
      document.getElementById('count-patched').textContent = counts.patched;
    }

    // Add New Game
    function addGame() {
      const name = document.getElementById('new-game-name').value.trim();
      const features = document.getElementById('new-game-features').value.trim();
      const status = document.getElementById('new-game-status').value;

      if (!name) {
        showToast('Please enter game name', 'error');
        return;
      }

      const id = name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
      
      db.ref(`games/${id}`).set({
        name,
        features: features || 'Auto Farm',
        status,
        lastUpdated: new Date().toISOString()
      }).then(() => {
        showToast('Game added successfully!');
        document.getElementById('new-game-name').value = '';
        document.getElementById('new-game-features').value = '';
      }).catch(err => {
        showToast('Error: ' + err.message, 'error');
      });
    }

    // Update Game
    function updateGame(id, field, value) {
      const updates = {
        [field]: value,
        lastUpdated: new Date().toISOString()
      };
      
      db.ref(`games/${id}`).update(updates)
        .then(() => showToast('Updated!'))
        .catch(err => showToast('Error: ' + err.message, 'error'));
    }

    // Delete Game
    function deleteGame(id) {
      if (!confirm('Are you sure you want to delete this game?')) return;
      
      db.ref(`games/${id}`).remove()
        .then(() => showToast('Game deleted!'))
        .catch(err => showToast('Error: ' + err.message, 'error'));
    }

    // Filter Games
    function filterAdminGames(search) {
      const filtered = {};
      Object.entries(allGames).forEach(([id, game]) => {
        if (game.name.toLowerCase().includes(search.toLowerCase())) {
          filtered[id] = game;
        }
      });
      renderGames(filtered);
    }

    // Show Toast
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toast-message');
      
      toastMessage.textContent = message;
      toast.className = `fixed bottom-4 right-4 px-4 py-3 rounded-lg text-white transform transition-all duration-300 z-50 ${
        type === 'error' ? 'bg-red-500' : 'bg-emerald-500'
      }`;
      
      toast.classList.remove('translate-y-20', 'opacity-0');
      
      setTimeout(() => {
        toast.classList.add('translate-y-20', 'opacity-0');
      }, 3000);
    }

    // Load games on start
    loadGames();
  </script>
</body>
</html>

